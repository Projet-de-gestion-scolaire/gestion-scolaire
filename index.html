<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <title>Tableau de Bord - Gestion Scolaire</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        /* D√©finitions des couleurs personnalis√©es en CSS pur */
        /* Celles-ci doivent correspondre aux classes Tailwind que vous utilisez */
        .bg-primary-blue {
            background-color: #0F172A;
        }

        .text-primary-blue {
            color: #0F172A;
        }

        .bg-accent-blue {
            background-color: #2563EB;
        }

        .hover\:bg-accent-blue:hover {
            background-color: #2563EB;
        }

        .bg-accent-blue-dark {
            background-color: #1D4ED8;
        }

        .hover\:bg-accent-blue-dark:hover {
            background-color: #1D4ED8;
        }

        .bg-accent-green {
            background-color: #10B981;
        }

        .hover\:bg-accent-green-dark:hover {
            background-color: #059669;
        }

        .bg-accent-yellow {
            background-color: #FBBF24;
        }

        .hover\:bg-accent-yellow-dark:hover {
            background-color: #F59E0B;
        }

        .bg-accent-red {
            background-color: #EF4444;
        }

        .hover\:bg-accent-red-dark:hover {
            background-color: #DC2626;
        }

        .bg-accent-cyan {
            background-color: #06B6D4;
        }

        .hover\:bg-accent-cyan-dark:hover {
            background-color: #0891B2;
        }

        /* NOUVELLES COULEURS (ajust√©es par rapport √† l'autre fichier) */
        .bg-accent-purple {
            background-color: #8B5CF6;
        }

        .hover\:bg-accent-purple-dark:hover {
            background-color: #7C3AED;
        }

        .bg-accent-orange {
            background-color: #F97316;
        }

        .hover\:bg-accent-orange-dark:hover {
            background-color: #EA580C;
        }


        /* Styles pour les √©l√©ments du menu lat√©ral (SIDEBAR) */
        /* Cible les liens du menu non actifs */
        #main-sidebar nav a:not(.bg-accent-blue) {
            /* Styles par d√©faut pour les liens non survol√©s et non actifs */
            color: #4B5563;
            /* text-gray-700 */
            font-weight: 600;
            /* font-semibold */
        }

        /* Styles de survol pour les liens du menu (pour le texte et les ic√¥nes) */
        #main-sidebar nav a.group:hover span.group-hover\:text-white {
            color: white !important;
            /* Force le texte √† devenir blanc au survol */
        }

        /* Et pour les ic√¥nes (text-gray-600 par d√©faut) */
        #main-sidebar nav a.group:hover span.text-gray-600 {
            color: white !important;
            /* Force les ic√¥nes √† devenir blanches au survol */
        }

        /* Styles pour le header au d√©filement */
        .scrolled-header {
            background-color: #0F172A;
            /* Couleur du header quand on scroll */
            color: white;
            /* Texte en blanc quand le header est fonc√© */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            /* Ombre plus prononc√©e */
            transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }

        .scrolled-header .text-primary-blue {
            color: white;
            /* S'assure que le titre change aussi de couleur */
        }

        .scrolled-header .text-gray-600 {
            color: white;
            /* For the icons in the navbar */
        }

        .scrolled-header .text-gray-700 {
            color: white;
            /* For the icons in the navbar */
        }

        .scrolled-header .hover\:text-accent-blue:hover {
            color: #DBEAFE;
            /* A lighter blue for icon hover on dark background */
        }

        .scrolled-header .hover\:text-accent-cyan:hover {
            color: #67E8F9;
            /* A lighter cyan for icon hover on dark background */
        }

        .scrolled-header .hover\:text-accent-green:hover {
            color: #86EFAC;
            /* A lighter green for icon hover on dark background */
        }

        /* Styles pour la barre lat√©rale sur mobile */
        #main-sidebar.active {
            transform: translateX(0);
        }

        #sidebar-overlay.active {
            opacity: 0.5;
            display: block;
        }
    </style>
</head>

<body class="bg-gray-100 text-gray-800 font-sans">

    <header id="main-header"
        class="bg-white shadow fixed top-0 left-0 right-0 z-50 flex items-center justify-between py-2 px-4 transition-all duration-300 ease-in-out">
        <div class="flex items-center space-x-4">
            <img src="logo.png" alt="Logo √©cole" class="w-12 h-12 object-contain" />
            <h1 class="text-xl font-bold text-primary-blue">Gestion Administrative</h1>
        </div>

        <button id="menu-toggle" class="md:hidden text-gray-600 hover:text-accent-blue focus:outline-none">
            <i class="fas fa-bars text-xl"></i>
        </button>

        <div class="flex items-center space-x-4">
            <a href="notification.html" class="relative text-gray-600 hover:text-accent-cyan">
                <i class="fas fa-bell text-xl"></i>
                <span id="notification-count" class="text-xs bg-red-500 text-white rounded-full px-1 absolute top-0 right-0 hidden">0</span>

            </a>
            <div class="relative">
                <button id="user-toggle"
                    class="flex items-center space-x-1 text-gray-700 hover:text-accent-green focus:outline-none">
                    <i class="fas fa-user-circle text-2xl"></i><span>N√®n√® Diallo</span><i
                        class="fas fa-caret-down text-sm"></i>
                </button>
                <div id="user-dropdown" class="hidden absolute right-0 mt-2 w-40 bg-white border rounded shadow-lg z-50">
                    <a href="#" class="block px-4 py-2 text-sm hover:bg-green-100">Profil</a>
                    <a href="#" class="block px-4 py-2 text-sm hover:bg-green-100">D√©connexion</a>
                </div>
            </div>
            <a href="parametres.html" class="text-gray-600 hover:text-primary-blue"><i class="fas fa-cog text-xl"></i></a>
        </div>
    </header>

    <div class="flex max-w-7xl mx-auto pt-24 px-4 gap-6">
        <aside id="main-sidebar"
            class="bg-white w-64 min-h-screen p-4 shadow-md
                    fixed top-0 left-0 h-full transform -translate-x-full md:relative md:translate-x-0 md:block
                    transition-transform duration-300 ease-in-out z-40">
            <h2 class="text-xl font-semibold mb-4 text-primary-blue">Tableau de bord - Menu</h2>
            <nav class="space-y-2">
                <a href="index.html" class="flex items-center py-2 px-4 rounded bg-accent-blue text-white font-semibold">
                    <span class="text-xl mr-3 text-white">üè†</span>
                    <span class="hidden md:inline text-white">Accueil</span>
                </a>

                <a href="eleve.html"
                    class="flex items-center py-2 px-4 rounded transition-colors duration-200 group hover:bg-accent-blue">
                    <span class="text-xl mr-3 text-gray-600 group-hover:text-white">üë®‚Äçüéì</span>
                    <span class="hidden md:inline font-semibold text-gray-700 group-hover:text-white">√âl√®ves</span>
                </a>

                <a href="classes.html"
                    class="flex items-center py-2 px-4 rounded transition-colors duration-200 group hover:bg-accent-blue">
                    <span class="text-xl mr-3 text-gray-600 group-hover:text-white">üìö</span>
                    <span class="hidden md:inline font-semibold text-gray-700 group-hover:text-white">Classes &
                        Mati√®res</span>
                </a>

                <a href="emploi.html"
                    class="flex items-center py-2 px-4 rounded transition-colors duration-200 group hover:bg-accent-blue">
                    <span class="text-xl mr-3 text-gray-600 group-hover:text-white">üìÖ</span>
                    <span class="hidden md:inline font-semibold text-gray-700 group-hover:text-white">Emploi du
                        temps</span>
                </a>

                <a href="professeur.html"
                    class="flex items-center py-2 px-4 rounded transition-colors duration-200 group hover:bg-accent-blue">
                    <span class="text-xl mr-3 text-gray-600 group-hover:text-white">üë®‚Äçüè´</span>
                    <span class="hidden md:inline font-semibold text-gray-700 group-hover:text-white">Professeurs</span>
                </a>

                <a href="notification.html"
                    class="flex items-center py-2 px-4 rounded transition-colors duration-200 group hover:bg-accent-blue">
                    <span class="text-xl mr-3 text-gray-600 group-hover:text-white">üîî</span>
                    <span class="hidden md:inline font-semibold text-gray-700 group-hover:text-white">Notifications</span>
                </a>

                <a href="parametres.html"
                    class="flex items-center py-2 px-4 rounded transition-colors duration-200 group hover:bg-accent-blue">
                    <span class="text-xl mr-3 text-gray-600 group-hover:text-white">‚öô</span>
                    <span class="hidden md:inline font-semibold text-gray-700 group-hover:text-white">Param√®tres</span>
                </a>
            </nav>
        </aside>

        <main class="flex-1 space-y-6">
            <div class="bg-white p-4 rounded shadow text-gray-700 flex items-center space-x-2">
                <i class="fas fa-calendar-alt text-accent-blue text-xl"></i>
                <p class="font-medium">Bienvenue N√®n√® Diallo ‚Äì 2 juillet 2025</p>
            </div>
            <div class="mb-6">
                <p class="text-lg text-gray-700 mb-4">Bienvenue dans l'espace de gestion des √©l√®ves. Voici un aper√ßu de
                    la
                    performance scolaire :</p>
                <div class="bg-white p-4 rounded shadow-md w-full max-w-md mx-auto">
                    <canvas id="performanceChart" class="mx-auto"></canvas>
                </div>
            </div>


            <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-accent-blue text-white p-6 rounded-xl shadow hover:scale-105 transform transition">
                    <h3 class="text-lg font-semibold mb-1">üìò Total √©l√®ves</h3>
                    <p id="card-eleves" class="text-3xl font-bold">0</p>
                </div>
                <div class="bg-accent-green text-white p-6 rounded-xl shadow hover:scale-105 transform transition">
                    <h3 class="text-lg font-semibold mb-1">üë®‚Äçüè´ Enseignants</h3>
                    <p id="card-profs" class="text-3xl font-bold">0</p>
                </div>
                
                <div class="bg-accent-yellow text-white p-6 rounded-xl shadow hover:scale-105 transform transition">
                    <h3 class="text-lg font-semibold mb-1">üîî Notifications</h3>
                    <p id="card-notifs" class="text-3xl font-bold">0</p>
                </div>
                <div class="bg-primary-blue text-white p-6 rounded-xl shadow hover:scale-105 transform transition">
                    <h3 class="text-lg font-semibold mb-1">üìÖ √âv√©nements</h3>
                    <p id="card-avenir" class="text-3xl font-bold">0</p>
                </div>
                <div class="bg-accent-purple text-white p-6 rounded-xl shadow hover:scale-105 transform transition">
                    <h3 class="text-lg font-semibold mb-1">‚úÖ T√¢ches</h3>
                    <p id="card-a-faire" class="text-3xl font-bold">0</p>
                </div>
            </section>

            <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4">
                <a href="eleve.html"
                    class="bg-white border border-gray-200 hover:bg-blue-50 p-4 rounded shadow flex items-center space-x-2">
                    <i class="fas fa-user-plus text-accent-blue text-xl"></i>
                    <span class="font-medium text-gray-800">‚ûï Ajouter un √©l√®ve</span>
                </a>
                <a href="professeur.html"
                    class="bg-white border border-gray-200 hover:bg-green-50 p-4 rounded shadow flex items-center space-x-2">
                    <i class="fas fa-chalkboard-teacher text-accent-green text-xl"></i>
                    <span class="font-medium text-gray-800">üë®‚Äçüè´ Ajouter un prof</span>
                </a>
                <a href="emploi.html"
                    class="bg-white border border-gray-200 hover:bg-green-50 p-4 rounded shadow flex items-center space-x-2">
                    <i class="fas fa-calendar text-accent-green text-xl"></i>
                    <span class="font-medium text-gray-800">üìÖ Emploi du temps</span>
                </a>
                <a href="parametres.html"
                    class="bg-white border border-gray-200 hover:bg-gray-100 p-4 rounded shadow flex items-center space-x-2">
                    <i class="fas fa-cog text-gray-700 text-xl"></i>
                    <span class="font-medium text-gray-800">‚öô Param√®tres</span>
                </a>
            </section>

            <section class="bg-white p-4 rounded shadow">
                <h3 class="text-lg font-semibold text-primary-blue mb-2">üìã Activit√© r√©cente</h3>
                <ul class="list-disc pl-5 text-gray-700">
                    <li>‚úî √âl√®ve ajout√© : Aissatou Bah</li>
                    <li>‚úî Emploi du temps mis √† jour</li>
                </ul>
            </section>

            <section class="bg-white p-4 rounded shadow">
                <h3 class="text-lg font-semibold text-primary-blue mb-2">üìÖ √Ä venir</h3>
                <ul id="upcoming-tasks-list" class="list-disc pl-5 text-gray-700">
                    <li>Aucune t√¢che √† venir.</li>
                </ul>
            </section>
        </main>
    </div>

    <div id="sidebar-overlay"
        class="fixed inset-0 bg-black opacity-0 z-30 hidden transition-opacity duration-300 ease-in-out"></div>

    <footer class="mt-10 bg-primary-blue text-white text-center py-4 text-sm">
        <p>&copy; 2025 √âcole X - Tous droits r√©serv√©s</p>
    </footer>

    <script>
        // R√©f√©rences aux √©l√©ments du DOM pour la responsivit√©
        const menuToggle = document.getElementById("menu-toggle");
        const mainSidebar = document.getElementById("main-sidebar");
        const sidebarOverlay = document.getElementById("sidebar-overlay");
        const userToggle = document.getElementById("user-toggle");
        const userDropdown = document.getElementById("user-dropdown");
        const mainHeader = document.getElementById("main-header"); // R√©f√©rence au header pour l'effet de scroll



        // R√©f√©rences pour les notifications
        const notificationCountSpan = document.getElementById("notification-count");
        const cardNotifsElement = document.getElementById("card-notifs");

        // R√©f√©rences pour les t√¢ches
        const taskCountElement = document.getElementById("card-a-faire");
        const upcomingTasksList = document.getElementById("upcoming-tasks-list");


        // Fonctions pour le menu lat√©ral
        function openSidebar() {
            mainSidebar.classList.remove("-translate-x-full");
            sidebarOverlay.classList.remove("hidden");
            setTimeout(() => {
                sidebarOverlay.classList.add("opacity-50");
            }, 10);
        }

        function closeSidebar() {
            mainSidebar.classList.add("-translate-x-full");
            sidebarOverlay.classList.remove("opacity-50");
            setTimeout(() => {
                sidebarOverlay.classList.add("hidden");
            }, 300);
        }

        menuToggle.addEventListener("click", () => {
            if (mainSidebar.classList.contains("-translate-x-full")) {
                openSidebar();
            } else {
                closeSidebar();
            }
        });

        sidebarOverlay.addEventListener("click", closeSidebar);

        const navLinks = mainSidebar.querySelectorAll('nav a');
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth < 768) { // Si sur un √©cran mobile
                    closeSidebar();
                }
            });
        });


        // Script Dropdown utilisateur (d√©plac√© et adapt√©)
        userToggle.addEventListener("click", () => {
            userDropdown.classList.toggle("hidden");
        });

        document.addEventListener("click", (event) => {
            if (!userToggle.contains(event.target) && !userDropdown.contains(event.target)) {
                userDropdown.classList.add("hidden");
            }
        });

        // Initialisation au chargement de la page et lors du redimensionnement pour la sidebar
        function setInitialSidebarState() {
            if (window.innerWidth < 768) {
                mainSidebar.classList.add("-translate-x-full");
                sidebarOverlay.classList.add("hidden");
            } else {
                mainSidebar.classList.remove("-translate-x-full");
                sidebarOverlay.classList.add("hidden");
            }
        }

        setInitialSidebarState();
        window.addEventListener('resize', setInitialSidebarState);


        // Effet de d√©filement du Header (identique aux autres pages)
        // R√©f√©rences aux √©l√©ments qui changent de couleur
        const h1Title = mainHeader.querySelector('h1');
        const bellIcon = mainHeader.querySelector('.fa-bell');
        const userIcon = mainHeader.querySelector('.fa-user-circle');
        const settingsIcon = mainHeader.querySelector('.fa-cog');
        const userToggleBtn = document.getElementById('user-toggle');
        const menuToggleBtn = document.getElementById('menu-toggle');


        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) { // Si on a scroll√© de plus de 50px
                mainHeader.classList.add('scrolled-header');
                // Changer les couleurs des ic√¥nes et texte pour le contraste
                h1Title.classList.add('text-white');
                h1Title.classList.remove('text-primary-blue');

                bellIcon.classList.add('text-white');
                bellIcon.classList.remove('text-gray-600');
                userIcon.classList.add('text-white');
                userIcon.classList.remove('text-gray-700');
                settingsIcon.classList.add('text-white');
                settingsIcon.classList.remove('text-gray-600');
                userToggleBtn.classList.add('text-white');
                userToggleBtn.classList.remove('text-gray-700');
                menuToggleBtn.classList.add('text-white');
                menuToggleBtn.classList.remove('text-gray-600');

            } else {
                mainHeader.classList.remove('scrolled-header');
                // Revenir aux couleurs originales
                h1Title.classList.remove('text-white');
                h1Title.classList.add('text-primary-blue');

                bellIcon.classList.remove('text-white');
                bellIcon.classList.add('text-gray-600');
                userIcon.classList.remove('text-white');
                userIcon.classList.add('text-gray-700');
                settingsIcon.classList.remove('text-white');
                settingsIcon.classList.add('text-gray-600');
                userToggleBtn.classList.remove('text-white');
                userToggleBtn.classList.add('text-gray-700');
                menuToggleBtn.classList.remove('text-white');
                menuToggleBtn.classList.add('text-gray-600');
            }
        });


        // Script pour les statistiques et le graphique de performance (MIS √Ä JOUR pour utiliser localStorage)
        // Fonction pour r√©cup√©rer les r√©sultats d'examen depuis localStorage
        const getEleves = () => JSON.parse(localStorage.getItem('eleves') || '[]');
        const getProfesseurs = () => JSON.parse(localStorage.getItem('professeurs') || '[]');
        const getExamResults = () => JSON.parse(localStorage.getItem("examResults") || "[]");

        // Fonctions pour les notifications
        const getNotifications = () => JSON.parse(localStorage.getItem('notifications') || '[]');
        const setNotifications = (notifications) => localStorage.setItem('notifications', JSON.stringify(notifications));

        // Fonctions pour les t√¢ches
        const getTasks = () => JSON.parse(localStorage.getItem('tasks') || '[]');
        const setTasks = (tasks) => localStorage.setItem('tasks', JSON.stringify(tasks));


        // Fonction pour ajouter une notification (pour les tests)
        function addNotification(message) {
            const notifications = getNotifications();
            const newNotification = {
                id: Date.now(), // ID unique
                message: message,
                date: new Date().toLocaleDateString('fr-FR'),
                time: new Date().toLocaleTimeString('fr-FR'),
                read: false // Par d√©faut, non lue
            };
            notifications.push(newNotification);
            setNotifications(notifications);
            updateNotificationCounts(); // Mettre √† jour l'affichage apr√®s ajout
        }

        // Fonction pour compter les notifications non lues et mettre √† jour l'affichage
        function updateNotificationCounts() {
            const notifications = getNotifications();
            const unreadCount = notifications.filter(notif => !notif.read).length;

            notificationCountSpan.textContent = unreadCount;
            cardNotifsElement.textContent = unreadCount;

            // Afficher/cacher le badge si n√©cessaire
            if (unreadCount > 0) {
                notificationCountSpan.classList.remove('hidden');
            } else {
                notificationCountSpan.classList.add('hidden');
            }
        }

        // Fonction pour ajouter une t√¢che (sera utilis√©e par la page des param√®tres)
        function addTask(description, dueDate) {
            const tasks = getTasks();
            const newTask = {
                id: Date.now(),
                description: description,
                dueDate: dueDate, // Format "YYYY-MM-DD"
                completed: false
            };
            tasks.push(newTask);
            setTasks(tasks);
            updateTaskCounts(); // Met √† jour l'affichage des t√¢ches
        }

  function updateTaskCounts() {
    const tasks = getTasks();
    const incompleteTasksCount = tasks.filter(task => !task.completed).length;

    // Mise √† jour de la carte "T√¢ches"
    if (taskCountElement) {
        taskCountElement.textContent = incompleteTasksCount;
    }

    // Mise √† jour de la section "√Ä venir"
    const today = new Date();
    today.setHours(0, 0, 0, 0); // Pour ne comparer que la date

    const upcomingTasks = tasks.filter(task => {
        if (!task.completed && task.dueDate) {
            const taskDate = new Date(task.dueDate);
            return taskDate >= today;
        }
        return false;
    }).sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate));

    upcomingTasksList.innerHTML = ''; // Vider l'ancienne liste

    if (upcomingTasks.length > 0) {
        upcomingTasks.forEach(task => {
            const listItem = document.createElement('li');
            const taskDate = new Date(task.dueDate).toLocaleDateString('fr-FR', { day: '2-digit', month: '2-digit', year: 'numeric' });
            listItem.textContent = `${task.description} ‚Äì Date limite : ${taskDate}`;
            upcomingTasksList.appendChild(listItem);
        });
    } else {
        const listItem = document.createElement('li');
        listItem.textContent = 'Aucune t√¢che √† venir.';
        upcomingTasksList.appendChild(listItem);
    }
}



        function updatePerformanceChart() {
            const eleves = getEleves();
            const professeurs = getProfesseurs();
            const examResults = getExamResults();

            document.getElementById('card-eleves').textContent = eleves.length;
            document.getElementById('card-profs').textContent = professeurs.length;
    
            // Mise √† jour du nombre de notifications via la fonction d√©di√©e
            updateNotificationCounts();
            // Mise √† jour des comptes de t√¢ches
            updateTaskCounts();


            // --- Donn√©es pour le Diagramme √† barres group√©es ---
            const examLabels = ['Examen', 'Brevet', 'Baccalaur√©at'];
            const dataSuccess = [];
            const dataFailure = [];

            examLabels.forEach(label => {
                const result = examResults.find(e => e.type === label);
                if (result) {
                    dataSuccess.push(result.success);
                    dataFailure.push(result.failure);
                } else {
                    dataSuccess.push(0);
                    dataFailure.push(0);
                }
            });

            if (window.performanceChartInstance) {
                window.performanceChartInstance.destroy();
            }

            const ctx = document.getElementById('performanceChart').getContext('2d');
            window.performanceChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: examLabels,
                    datasets: [
                        {
                            label: 'Taux de R√©ussite (%)',
                            data: dataSuccess,
                            backgroundColor: '#10B981', // accent-green
                            borderColor: '#059669',
                            borderWidth: 1
                        },
                        {
                            label: 'Taux d\'√âchec (%)',
                            data: dataFailure,
                            backgroundColor: '#EF4444', // accent-red
                            borderColor: '#DC2626',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            labels: {
                                font: {
                                    size: 14
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Taux de R√©ussite et d\'√âchec par Examen',
                            font: {
                                size: 16
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function (context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y + '%';
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Examen'
                            },
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'Pourcentage (%)'
                            }
                        }
                    }
                }
            });
        }

        // Initialisation des donn√©es pour les tests (√† supprimer en production)
        function initializeDummyData() {
            // Notifications (exemple, si vous n'en avez pas encore)
            if (getNotifications().length === 0) {
                addNotification("Nouveau devoir de maths pour la classe de 4√®me.");
                addNotification("Rappel: R√©union parents-professeurs demain √† 16h.");
                addNotification("Fermeture exceptionnelle de l'√©cole le 10 juillet.");
            }

            // Eleves (pour s'assurer que card-eleves n'est pas 0 si vous n'avez pas d'√©l√®ves enregistr√©s)
            if (getEleves().length === 0) {
                localStorage.setItem('eleves', JSON.stringify([
                    { id: 1, nom: "John Doe", matricule: "E001" },
                    { id: 2, nom: "Jane Smith", matricule: "E002" }
                ]));
            }

            // Professeurs
            if (getProfesseurs().length === 0) {
                localStorage.setItem('professeurs', JSON.stringify([
                    { id: 1, nom: "M. Dupont" },
                    { id: 2, nom: "Mme Martin" }
                ]));
            }

            // Exam Results
            if (getExamResults().length === 0) {
                localStorage.setItem('examResults', JSON.stringify([
                    { type: "Examen", success: 85, failure: 15 },
                    { type: "Brevet", success: 70, failure: 30 },
                    { type: "Baccalaur√©at", success: 92, failure: 8 }
                ]));
            }

            // T√¢ches (nouvel ajout)
            if (getTasks().length === 0) {
                addTask("Pr√©parer la r√©union p√©dagogique", "2025-07-08"); // Demain
                addTask("Corriger les devoirs de fran√ßais", "2025-07-09");
                addTask("Planifier les activit√©s sportives", "2025-07-05"); // Ancien, devrait appara√Ætre comme non "√† venir" si non compl√©t√©
                addTask("Mettre √† jour le registre des absences", "2025-07-15");
                addTask("Envoyer les bulletins du premier trimestre", "2025-08-01");
                // T√¢che d√©j√† compl√©t√©e
                const tasks = getTasks();
                if (tasks.length > 0) {
                    tasks[2].completed = true; // Simuler la compl√©tion de la 3√®me t√¢che
                    setTasks(tasks);
                }
            }
        }

        initializeDummyData(); // Appelez ceci au d√©but pour initialiser les donn√©es de test

        // Appeler la mise √† jour des statistiques et du graphique au chargement de la page
        updatePerformanceChart();
        // √âcouter l'√©v√©nement 'storage' pour mettre √† jour le graphique et les compteurs si les donn√©es changent dans une autre fen√™tre
        window.addEventListener('storage', updatePerformanceChart); // Utilise la m√™me fonction car elle g√®re tout

    </script>

</body>

</html>